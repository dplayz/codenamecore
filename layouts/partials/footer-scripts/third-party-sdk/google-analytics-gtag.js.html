{{- if eq hugo.Environment "production" }}
{{- if .Site.Params.disableFeature.googleAnalytics}}
{{- if .Site.Params.identity.analytics.googleAnalytics.measurementID}}
<script async defer src="https://www.googletagmanager.com/gtag/js?id={{.Site.Params.identity.googleAnalytics.measurementID}}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());
  
  {{if or (eq .Site.Params.identity.googleAnalytics.disablePageView true) (eq .Params.disableAnalytics true)}}
  gtag('config', '{{.Site.Params.identity.googleAnalytics.measurementID}}', { 'send_page_view': false });
  {{else}}
  gtag('config', '{{.Site.Params.identity.googleAnalytics.measurementID}}');
  {{end}}
</script>
{{- end}}
{{- end}}
{{- end}}