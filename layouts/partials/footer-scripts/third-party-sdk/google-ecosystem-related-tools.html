<!-- Google Translate -->
{{- if ne .Site.Params.disableFeature.googleTranslate true}}
<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" defer></script>
<script type="text/javascript" defer>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
    }
</script>
{{end}}

<!-- Google Platform SDK -->
{{- if ne .Site.Params.disableFeature.googlePlatformSDK true}}
<script src="https://apis.google.com/js/platform.js" async defer></script>
{{end}}

<!--Google Analytics gtag.js-->
{{- if eq hugo.Environment "production" }}
{{- if .Site.Params.disableFeature.googleAnalytics}}
{{- if .Site.Params.identity.analytics.googleAnalytics.measurementID}}
<script defer src="https://www.googletagmanager.com/gtag/js?id={{.Site.Params.identity.googleAnalytics.measurementID}}"></script>
<script defer>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());
  
  {{if or (eq .Site.Params.identity.googleAnalytics.disablePageView true) (eq .Params.disableAnalytics true)}}
  gtag('config', '{{.Site.Params.identity.googleAnalytics.measurementID}}', { 'send_page_view': false });
  {{else}}
  gtag('config', '{{.Site.Params.identity.googleAnalytics.measurementID}}');
  {{end}}
</script>
{{- end}}
{{- end}}
{{- end}}