{{- range .}}
    {{if eq .oneTime true}}
    {{- if not .id}}
        {{warnf "Failed to add One-Time Announcement Entry. You must provide an Announcement ID in order to work." }}
    {{- else}}
    <div data-nosnippet id="header-psa-onetime-{{.id}}" class="header-psa-grid-item header-psa-onetime" {{- if .color}}style="background-color:{{- .color}};" {{- end}}>
    {{.content | markdownify}}
    <button class="header-psa-onetime-close-button" {{- if .buttonColor}}style="background-color:{{- .buttonColor}};" {{- end}} onclick="var headerPSAOneTimeContentId = {{.id}}; headerPSAContentToggle(headerPSAOneTimeContentId)">{{- if .buttonText}}{{- .buttonText}}{{- else}}Close{{- end}}</button>
    <script>
        var headerPSAContentDisplay = document.getElementById({{print "header-psa-onetime-" (.id) }});
        var headerPSAOneTimeEntryChecker = localStorage.getItem({{.id}});
        if (headerPSAOneTimeEntryChecker !== null){ 
            console.log("{{.id}} entry exists in the localStorage, keeping content hidden")
        } else {
            console.log("{{.id}} entry does not exist in the localStorage, displaying content")
            var headerPSAOneTimeContentDisplay = document.getElementById('header-psa-onetime-'+ '{{.id}}');
            headerPSAOneTimeContentDisplay.classList.toggle('headerPsaOneTimeEntryActive');
        }

    </script>
    </div>
    {{- end}}
    {{- else }}
    <div data-nosnippet class="header-psa-grid-item" {{- if .color}}style="background-color:{{.color}};" {{end}}>
    {{.content | markdownify}}
    </div>
    {{- end}}
{{- end }}
<script>
        function headerPSAContentToggle(headerPSAOneTimeContentId){
            localStorage.setItem(headerPSAOneTimeContentId, true);
            var headerPSAContentDisplay = document.getElementById("header-psa-onetime-" + headerPSAOneTimeContentId);
            headerPSAContentDisplay.classList.toggle('headerPsaOneTimeEntryActive');
 
        }
</script>