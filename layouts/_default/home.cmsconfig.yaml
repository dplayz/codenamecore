{{- if eq .Site.Params.cms.backend.name "git-gateway" }}
backend: 
  name: {{.Site.Params.cms.backend.name}}
  branch: {{.Site.Params.cms.backend.gitgateway.branch}}
{{- else if eq .Site.Params.cms.backend.name "github"}}
backend:
  name: {{.Site.Params.cms.backend.name}}
  repo: {{.Site.Params.cms.backend.github.repo}}
  {{- if eq .Site.Params.cms.backend.github.useGraphQL true}}
  use_graphql: true
  {{- end }}
  base_url: {{.Site.BaseURL}}  
  {{-  if .Site.Params.cms.backend.github.auth_endpoint}}
  auth_endpoint: {{.Site.Params.cms.backend.github.auth_endpoint}}  
  {{- end}}
  {{- if eq .Site.Params.cms.backend.github.openAuthoring true}}
  open_authoring: true
  {{- end }}
  branch: {{.Site.Params.cms.backend.github.branch}}
{{- else if eq .Site.Params.cms.backend.name "gitlab"}}
backend:
  name: {{.Site.Params.cms.backend.gitlab.name}}
  repo: {{.Site.Params.cms.backend.gitlab.repo}}
  branch: {{.Site.Params.cms.backend.gitlab.branch}}
  {{- if eq .Site.Params.cms.backend.gitlab.useGraphQL true}}
  use_graphql: true
  {{- end }}
  {{if .Site.Params.cms.backend.gitlab.auth_type "pkce" }}
  auth_type: {{.Site.Params.cms.backend.gitlab.auth_type}}
  app_id: {{.Site.Params.cms.backend.gitlab.app_id}}
  {{- end}} 
{{- else if eq .Site.Params.cms.backend.name "bitbucket"}}
backend:
  name: {{.Site.Params.cms.backend.bitbucket.name}}
  repo: {{.Site.Params.cms.backend.bitbucket.repo}}
  branch: {{.Site.Params.cms.backend.bitbucket.branch}}
  {{if .Site.Params.cms.backend.bitbucket.auth_type "implicit" }}
  auth_type: {{.Site.Params.cms.backend.bitbucket.auth_type}}
  app_id: {{.Site.Params.cms.backend.bitbucket.app_id}}
  {{- end}} 
{{- else if eq .Site.Params.cms.backend.name "azure"}}
backend:
  name: {{.Site.Params.cms.backend.azure.name}}
  repo: {{.Site.Params.cms.backend.azure.repo}}
  tenant_id: {{.Site.Params.cms.backend.azure.tenant_id}}
  app_id: {{.Site.Params.cms.backend.azure.app_id}}
{{- else if eq .Site.Params.cms.backend.name "test-repo"}}
backend: 
  name: {{.Site.Params.cms.backend.testrepo.name}}
{{- end}}
{{- with or (eq .Site.Params.cms.editorial_workflow true) (eq .Site.Params.cms.publish_mode "editorial_workflow")}}
publish_mode: editorial_workflow
{{- end}}
{{- if .Site.Params.cms.media_folder}}
media_folder: {{.Site.Params.cms.media_folder}}
{{- end}}
{{- if .Site.Params.cms.public_folder}}
public_folder: {{.Site.Params.cms.public_folder}}
{{- end}}
{{- if .Site.Params.cms.display_url}}
display_url: {{.Site.Params.cms.display_url}}
{{- else}}
display_url: {{.Site.BaseURL}}
{{- end}}
{{- if .Site.Params.theme.logo}}
logo_url: {{.Site.Params.theme.logo}}
{{- else if .Site.Params.cms.logo_url}}
logo_url: {{.Site.Params.theme.logo}}
{{- end}}
{{- if and (eq hugo.Environment "development") (ne .Site.Params.cms.disableLocalBackend true)}}
local_backend: true 
{{- end}}
collections:  
{{- with .Site.Params.cms.collections}}
  {{- range .}}
    {{- with .name}}
  - name: {{.}}
    {{- end}}
    {{- with .label}}
    label: {{.}}
    {{- end}}
    {{- with .folder}}
    folder: {{.}}
    {{- end}}
    {{- with .create}}
    create: {{.}}
    {{- end}}
    {{- with .slug}}
    slug: "{{.}}"
    {{- end}}
    {{- if eq .useDefaultFields true}}
    fields:
      - { label: 'Title', name: 'title', widget: 'string'}
      - { label: 'Publish Date', name: 'date', widget: 'datetime' }
      - { label: 'Description', name: 'description', widget: 'string' }
      - { label: 'Body', name: 'body', widget: 'markdown' }
      - { label: 'Page Thumbnail', name: 'customPagePreview', widget: 'image', required: false }
      - { label: 'Author', name: 'author', widget: 'list', required: false }
      - { label: 'Tags', name: tags, widget: list, required: false}
      - { label: 'Categories', name: categories, widget: list, required: false}
      - { label: 'Permalink', name: 'permalink', widget: 'string', required: false}
      - label: "Build Options" 
        name: "_build" 
        collapse: false
        widget: "object"
        fields:
          - { label: "List page", name: "list", widget: "select", multiple: false, options: ["never", "always"], default: "always"}
      # Section specific values, should be hidden
      - { name: header_color, widget: hidden, required: false }
      - { name: header_color_dark, widget: hidden, required: false }
      - { name: header_textcolor, widget: hidden, required: false }
      - { name: header_textcolor_dark, widget: hidden, required: false }
      - { name: header_logo, widget: hidden, required: false }
    {{else}}
    {{- with .fields}}
    fields:    
      {{- range .}}
      - { {{- with .label}}label: "{{.}}", {{end}} {{- with .name}} name: "{{.}}", {{end}} widget: "{{if .type}}{{.type}}{{else}}{{.widget}}{{end}}", {{- with .picker_utc}} picker_utc: {{.}}, {{end}}{{- with .required}} required: {{.}}, {{end}}{{- with .default}} default: {{.}},{{end}}}
      {{- end}}
    {{- end}}
    {{- end}}
  {{- end}}
{{- end}}
  - label: "Site Configuration"
    name: "config"
    editor: { preview: false } 
    files:
    - name: "config"
      label: "Build and Theme Configuration"
      file: "config.yml"
      fields: 
        - { name: baseURL, label: 'Base URL', widget: string, required: true, default: "/" }
        - { name: languageCode, label: 'Language Code', widget: string, required: true }
        - { name: title, label: 'Site Name', widget: string, required: true, default: "Your Site"}   
        - { name: theme, label: "Theme", widget: string, required: true, default: "codenamecore" }
        - name: params
          label: 'Site Parameters'
          widget: object
          fields: 
            - name: theme
              label: 'Theme Configuration'
              widget: object
              collapsed: true
              fields:
              - name: linkcolor
                label: 'Color of the Links'
                widget: object
                collapsed: true
                fields:
                - { name: main, label: 'Main links', widget: color, default: "lightblue", required: false} 
                - { name: visited, label: 'Visited links', widget: color, default: "lightblue", required: false }
              - name: themeColor
                label: 'Browser Toolbar Color'
                widget: object
                collapsed: true
                fields:
                  - { name: light, label: 'Light/Default Mode', widget: color, required: false}
                  - { name: dark, label: 'Dark Mode', widget: color, required: false}
              - name: background
                label: 'Background Options'
                widget: object
                collapsed: true
                fields:
                - name: color
                  label: 'Color'
                  widget: object
                  fields: 
                  - { name: type, label: 'type', widget: select, options: ["solid", "lineargradient"], required: false }
                  - { name: lightdarkscheme, slabel: "Enable light-dark scheme", widget: boolean, required: false }
                  - name: lineargradient
                    label: lineargradient
                    widget: object
                    collapsed: true
                    fields:
                    - name: light
                      label: "Light Mode"
                      widget: object
                      collapsed: true
                      fields:
                      - name: left
                        label: "Left"
                        widget: object
                        fields:
                          - { name: color, label: "Color", widget: color, required: false }
                          - { name: position, label: "Position", widget: string, default: 10%, required: false }
                      - name: right
                        label: "Right"
                        widget: object
                        fields:
                          - { name: color, label: "Color", widget: color, required: false }
                          - { name: position, label: "Position", widget: string, default: 50%, required: false }
                    - name: dark
                      label: "Dark Mode"
                      widget: object
                      collapsed: true
                      fields:
                      - name: left
                        label: "Left"
                        widget: object
                        fields:
                          - { name: color, label: "Color", widget: color, required: false }
                          - { name: position, label: "Position", widget: string, default: 10%, required: false }
                      - name: right
                        label: "Right"
                        widget: object
                        fields:
                          - { name: color, label: "Color", widget: color, required: false }
                          - { name: position, label: "Position", widget: string, default: 50%, required: false }
                  - name: solid
                    label: "Solid Color"
                    widget: object
                    collapsed: true
                    fields:
                    - name: light
                      label: "Light Mode"
                      widget: object
                      collapsed: true
                      fields:
                        - { name: color, label: "Color", widget: color, required: false }
                    - name: dark
                      label: "Dark Mode"
                      widget: object
                      collapsed: true
                      fields:
                        - { name: color, label: "Color", widget: color, required: false }
              - label: "Font"
                name: font
                widget: object
                collapsed: true
                fields:
                  - { label: "Font Family to be used", name: family, widget: string, default: "Roboto, Helvetica, Arial, sans-serif, Times New Roman", required: false} 
                  - label: "Custom Font"
                    name: custom
                    widget: list
                    required: false
                    fields:
                      - { label: "Font Family Name", name: family, widget: string }
                      - { label: "Font Family URL", name: url, widget: string }
              - { label: "Default Page Preview Thumbnail", name: pagePreviewImage, widget: image }
              - { label: "Favicon URL", name: favicon, widget: image, default: "favicon.ico", required: false }
              - label: "List Options"
                name: list
                widget: object
                collapsed: true
                fields:  
                - label: "Section List Options"
                  name: sectionList
                  widget: object
                  collapsed: true
                  fields:
                    - { label: "Article Snippet Style", name: articleSnippetStyle, widget: select, options: [listStyle, boxStyle] } 
                - label: "Related Article Options"
                  name: relatedArticle
                  widget: object
                  collapsed: true
                  fields:
                    - label: "Enable Related Article"
                      name: enable
                      widget: boolean
                      default: false
                    - label: "Article Snippet Style"
                      name: articleSnippetStyle
                      widget: select
                      options: [listStyle, boxStyle]
            - label: "Copyright Information"
              name: copyright
              collapsed: true
              widget: object
              fields:
                - { label: "Copyright Start Date", name: start, widget: date, format: 'YYYY' }
                - { label: "Copyright Today Date", name: today, widget: date, format: 'YYYY' }
                - { label: "Copyright rightholder", name: rightholder, widget: string }
                - { label: "Copyright notes", name: notes, widget: string }
                - { label: "Site managed by whom", name: managedByWhom, widget: markdown }
            - label: "Site Identity Information"
              name: identity
              widget: object
              collapsed: true
              fields:
                - label: "General"
                  name: general
                  widget: object
                  fields: 
                    - { name: logo, label: 'Site Logo', widget: image, default: /images/logo, required: false }
                    - { name: description, label: 'Site Default Description', widget: text, required: false }
                    - label: "Default Author Options"
                      name: defaultAuthor
                      widget: object
                      collapsed: true
                      fields:
                        - { name: name, label: 'Name', widget: string}
                        - { name: description, label: 'Description', widget: string, required: false}                    
                - label: "PWA"
                  name: pwa
                  widget: object
                  fields:
                    - { label: "App Name", name: appName, widget: string, required: false }
                    - { label: "Short App Name", name: shortAppName, widget: string, required: false }
                    - { label: "Custom Splash", name: customSplashImage, widget: image, required: false }
                - label: "Search Engine"
                  name: webmaster
                  widget: object
                  collapsed: true
                  fields:
                    - { label: "Google Search Console Verification Code", name: googleSiteVerificationCode, widget: string, required: false}
                    - { label: "Bing Webmaster Tools Site Validation Code", name: bingValidationCode, widget: string, required: false}
                    - { label: "Yandex.Webmaster Site Validation Code", name: yandexValidationCode, widget: string, required: false}
                    - { name: noIndexAll, label: 'Do not Index site to Search Engines', widget: boolean, default: false, required: false } 
                - label: "SDKs"
                  name: sdk
                  widget: object
                  collapsed: true
                  fields:
                    - { label: "Facebook SDK ID", name: fbSDKID, widget: string, required: false}
                    - { label: "OneSignal SDK ID", name: onesignalSDKID, widget: string, required: false}
                - label: "Analytics"
                  name: analytics
                  widget: object
                  collapsed: true
                  fields:
                    - { label: "Google Analytics", name: googleAnalytics, widget: object, fields: [{label: "Measurement ID", name: measurementID, widget: string, required: false}, {label: "Disable Page View on whole site" , name: disablePageView, widget: boolean, required: false }], collapsed: true }
                - label: "SNS Information"
                  name: snsInfo
                  widget: object
                  collapsed: true
                  fields:
                    - { label: "Facebook Page ID", name: fbPageID, widget: string, required: false}
            - label: "CMS Configuration"
              name: cms
              widget: object
              collapsed: true
              fields:
                - label: "Backend Information"
                  name: backend
                  widget: object
                  collapsed: true
                  fields:
                    - label: "Backend Name"
                      name: name
                      widget: select
                      options: ["git-gateway", "github", "gitlab", "bitbucket", "azure", "test-repo"]
                    - label: "Github"
                      name: github
                      widget: object
                      collapsed: true
                      required: false
                      fields:
                        - { label: "Repo", name: repo, widget: string, required: false }
                        - { label: "Branch", name: branch, widget: string, required: false }
                        - { label: "Use GraphQL", name: useGraphQL, widget: boolean, required: false }
                        - { label: "Auth Endpoint (for non-Netlify users)", name: auth_endpoint, widget: string, required: false }
                    - label: "Gitlab"
                      name: gitlab
                      widget: object
                      collapsed: true
                      required: false
                      fields:
                        - { label: "Repo", name: repo, widget: string, required: false }
                        - { label: "Branch", name: branch, widget: string, required: false }
                        - { label: "Use GraphQL", name: useGraphQL, widget: boolean, required: false }
                        - { label: "Authentication Type (for self-hosted options)", name: auth_type, widget: select, required: false, options: ["pkce"] }
                        - { label: "App ID (for self-hosted options)", name: app_id, widget: string, required: false }
                    - label: "Bitbucket"
                      name: bitbucket
                      widget: object
                      collapsed: true
                      required: false
                      fields:
                        - { label: "Repo", name: repo, widget: string, required: false }
                        - { label: "Branch", name: branch, widget: string, required: false }
                        - { label: "Authentication Type (for self-hosted options)", name: auth_type, widget: select, options: ["implicit"], required: false }
                        - { label: "App ID (for self-hosted options)", name: app_id, widget: string, required: false }
                    - label: "Azure Repo"
                      name: azure
                      widget: object
                      collapsed: true
                      required: false
                      fields:
                        - { label: "Repo", name: repo, widget: string, required: false }
                        - { label: "Tenant ID", name: tenant_id, widget: string, required: false }
                        - { label: "App ID", name: app_id, widget: string, required: false }
                - { label: "Enable Editorial Workflow", name: editorial_workflow, widget: boolean, default: false, required: false  }
                - label: "Collections"
                  name: collections
                  widget: list
                  collapsed: true
                  required: false
                  fields:
                    - { label: Label, name: label,  widget: string }
                    - { label: Name, name: name,  widget: string }
                    - { label: Folder, name: folder, widget: string, default: "content/posts" }
                    - { label: Enable Creation, name: create, widget: boolean, default: true, required: false}
                    - { label: "Use Default Fields",  name: useDefaultFields, widget: boolean, default: true, required: false}
                # task: []add customized collections order
            - label: "PSA/Notice"
              name: psa
              widget: object
              collapsed: true
              required: false
              fields:
                - { name: enable, label: "Enable", widget: boolean, default: false, required: false}
                - { name: color, label: "Background Color", widget: color, required: false}
                - { name: content, label: "Content", widget: markdown, required: false}
        - { name: permalinks, widget: hidden }
        - { name: enableGitInfo, label: "Enable Git Info", widget: boolean, default: true }
        - { label: "Enable robots.txt file", name: enableRobotsTXT, widget: boolean, default: false } 
        - { label: "Build Drafts", name: buildDrafts, widget: boolean, default: false }
        - { label: "Build Future Posts", name: buildFuture, widget: boolean, default: false }
        - label: "Menu Items"
          name: "menu"
          widget: object
          collapsed: true
          fields:
          - label: "Header Links"
            name: main
            widget: list
            collapsed: true
            fields: 
              - { label: "Identifier", name: identifier, widget: string }
              - { label: "Name", name: name, widget: string }
              - label: "Params"
                name: params
                widget: object
                fields:
                - { label "URL", name: url, widget: string, required: false } 
              - { label: "Weight", name: weight, widget: number, value_type: "int", min: 0, step: 1 }
              - { label: "Parent (use identifier)", name: parent, required: false }
          - label: Footer Links
            name: footer
            widget: list
            collapsed: true
            fields:
              - { label: "Identifier", name: identifier, widget: string}
              - { label: "Name", name: name, widget: string}
              - label: Parameters
                name: params
                widget: object
                fields:
                  - label: Links
                    name: links
                    widget: list
                    collapsed: true
                    fields:
                    - { label: "Name", name: name, widget: string}
                    - { label: "URL", name: url, widget: string, required: false}
                    - label: Links
                      name: links
                      widget: list
                      collapsed: true
                      fields:
                        - { label: "Name", name: name, widget: string, required: false}
                        - { label: "URL", name: url, widget: string, required: false}
        - {name: outputs, widget: hidden}